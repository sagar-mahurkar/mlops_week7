apiVersion: v1
kind: Service
metadata:
  name: iris-fastapi-service
spec:
  # CRITICAL: This MUST match the labels defined in your Deployment's Pod template.
  selector:
    app: iris-fastapi
  
  # Type LoadBalancer provisions an external Load Balancer (like a GCE/GKE Load Balancer).
  type: LoadBalancer
  
  ports:
    # Port 80 is the external port (what clients connect to, e.g., http://EXTERNAL-IP:80)
    - protocol: TCP
      port: 80
      # TargetPort 8200 is the internal port the Pod's container is listening on (Uvicorn port)
      targetPort: 8200